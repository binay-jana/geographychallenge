<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=2.0">
<meta property="og:title" content="Highschool Geography Challenge" />
<meta property="og:type" content="article" />
<meta property="og:image" content="http://static.dnaindia.com/sites/default/files/1890206.jpg" />
<meta property="og:url" content="https://42b93ec2.ngrok.com/a"/>
<meta property="fb:app_id" content="1673890419499781"/>
<meta property="og:description" content="Answer 1 simple question; Nominate 5 friends; If you do not score more than 70% of the participants, donate $15 to help the victims of the 7.8M earthquake in Nepal." />
<meta property="og:title" content="Jana Trivia Challenge - A Fundraiser 7.8M earthquake victims in Nepal!"/>
<title>Jana Trivia Challenge for Nepal Earthquake Relief</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<link href="/static/css/trivia.css" media="all" rel="stylesheet" type="text/css"/>
<script>
    var correctly_answered = [];
    var questions = [{
        time: 300,
        challenge_description: "Names of the African Countries",
        total_answers: 54,
        description: "Name {number} African countries",
        friend_name_description: "{friend_name} challenged you to name {challenged_number} African countries",
        passing_score: 32,
        error_message: " is not an African country",
        answers: {
            "algeria": 0,
            "angola": 1,
            "benin": 2,
            "botswana": 3,
            "burkina faso": 4,
            "burundi": 5,
            "cabo verde": 6,
            "cameroon": 7,
            "central african republic": 8,
            "chad": 9,
            "comoros": 10,
            "congo democratic republic of the": 12,
            "democratic republic of the congo": 12,
            "congo republic of the": 11,
            "republic of the congo": 11,
            "cote d'ivoire": 13,
            "cote d ivoire": 13,
            "cote divoire": 13,
            "cote ivoire": 13,
            "djibouti": 14,
            "egypt": 15,
            "equatorial guinea": 16,
            "eritrea": 17,
            "ethiopia": 18,
            "gabon": 19,
            "gambia": 20,
            "ghana": 21,
            "guinea": 22,
            "guinea bissau": 23,
            "kenya": 24,
            "lesotho": 25,
            "liberia": 26,
            "libya": 27,
            "madagascar": 28,
            "malawi": 29,
            "mali": 30,
            "mauritania": 31,
            "mauritius": 32,
            "morocco": 33,
            "mozambique": 34,
            "namibia": 35,
            "niger": 36,
            "nigeria": 37,
            "rwanda": 38,
            "sao tome and principe": 39,
            "senegal": 40,
            "seychelles": 41,
            "sierra leone": 42,
            "somalia": 43,
            "south africa": 44,
            "south sudan": 45,
            "sudan": 46,
            "swaziland": 47,
            "tanzania": 48,
            "togo": 49,
            "tunisia": 50,
            "uganda": 51,
            "zambia": 52,
            "zimbabwe": 53
        },
        'names': [
            "Algeria",
            "Angola",
            "Benin",
            "Botswana",
            "Burkina Faso",
            "Burundi",
            "Cabo Verde",
            "Cameroon",
            "Central African Republic",
            "Chad",
            "Comoros",
            "Congo Republic of the",
            "Congo Democratic Republic of the",
            "Cote d'Ivoire",
            "Djibouti",
            "Egypt",
            "Equatorial Guinea",
            "Eritrea",
            "Ethiopia",
            "Gabon",
            "Gambia",
            "Ghana",
            "Guinea",
            "Guinea Bissau",
            "Kenya",
            "Lesotho",
            "Liberia",
            "Libya",
            "Madagascar",
            "Malawi",
            "Mali",
            "Mauritania",
            "Mauritius",
            "Morocco",
            "Mozambique",
            "Namibia",
            "Niger",
            "Nigeria",
            "Rwanda",
            "Sao Tome and Principe",
            "Senegal",
            "Seychelles",
            "Sierra Leone",
            "Somalia",
            "South Africa",
            "South Sudan",
            "Sudan",
            "Swaziland",
            "Tanzania",
            "Togo",
            "Tunisia",
            "Uganda",
            "Zambia",
            "Zimbabwe"
        ],
        question_id: 0 
    }]
    var variant = Math.floor((Math.random() * questions.length));

</script>
<style>
#challenge_box {}
#error_display {
  color: red;
}
body {
  z-index: 2;
}
h1 {
  margin: 0px;
  font-size: 24px;
}
#missed_numbers {
  display: none;
}
#missed_answers {
  display: none;
}
#how {
  font-size: 18px;
  font-weight: bold;
}

.steps {
  width: 100%;
  text-align: center;
  font-size: 20px;
  margin-bottom: 10px;
  font-weight: bold;
}

.answer_box {
  padding: 5px;
  overflow: hidden;
}
.answered_item {
  padding: 2px;
  padding-right: 5px;
  padding-left: 5px;
  text-align: center;
  border: 1px solid #008A2E;
  background-color: #CCEBD6;
  margin: 3px;
  float: left;
}
.missed_item {
  padding: 2px;
  padding-right: 5px;
  padding-left: 5px;
  text-align: center;
  border: 1px solid #CC2900;
  background-color: #FFEBE6;
  margin: 3px;
  float: left;
}
.signup_form{
  font-size: 14px;
  margin: 5px;
  width:270px;
  height:20px;
    border: 1px solid #EBE3DD;
    background: white;
}
.signup_form:hover {
    border: 1px solid white;
    background: #CCCCCC;
}
span#subscription{ font-size: 12px;
  text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
  cursor: default;}
span#rightboxheadline{
  text-align:center 
  cursor: default;
  text-shadow: -2px 0 black, 0 2px black, 2px 0 black, 0 -2px black;
  font-size: 25px;
  color:white;  
}
html{
  height: 100%;
}
div#bd {
  position: absolute;
    width: 100%;
    top: 34px;
    bottom: 0px;
    border-top: 1px solid #463F3E;
}
.container{
  height: 100%;
  position: relative;
}
 


@media screen and (max-width: 600px) {

}
a {
  text-decoration:none;
}
.error_input {
  border: 1px solid #cc3300 !important;
}
.error_label {
  color: #cc3300 !important;
}
a:hover{
  color: #0077b5;
}

</style>
<script>
function gogogo() {
  FB.ui({
    method: 'feed',
    link: 'http://phpied.com',
    picture: 'http://fbrell.com/f8.jpg',
    name: 'Sharrrre!',
    caption: 'Awesomesauce',
    description: 'Must read daily!'
  });
}
/*
$('#shortly').countdown({until: shortly,  
    onExpiry: liftOff, onTick: watchCountdown}); 
*/
</script>
</head>
<body>
<script>
(function($) {
    $.fn.flash_message = function(options) {
      options = $.extend({
        text: 'Done',
        time: 1000,
        how: 'before',
        class_name: ''
      }, options);
      
      return $(this).each(function() {
        if( $(this).parent().find('.flash_message').get(0) )
          return;
        
        var message = $('<span />', {
          'class': 'flash_message ' + options.class_name,
          text: options.text
        }).hide().fadeIn('fast');
        
        $(this)[options.how](message);
        
        message.delay(options.time).fadeOut('normal', function() {
          $(this).remove();
        });
        
      });
    };
})(jQuery);

(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));

// async init once loading is done
window.fbAsyncInit = function() {
  FB.init({appId: 1673890419499781, status: false});
};

window.onload = function() {
    populate_nomination_challenges();
    refresh_answer_counts();
    start_timer();
    welcome_user();
    $('#access_code_form').submit(function (event) {
        var answer = $.trim($('input#answer_box').val().toLowerCase());
        var error_string = null;
        if(questions[variant].answers[answer] != null){
            var answered_item = questions[variant].answers[answer];
            if ($.inArray(answered_item, correctly_answered)==-1) {
              append_answer(answered_item);
              refresh_answer_counts();
            } else {
              error_string = "You already entered " + questions[variant].names[answered_item];
            }
        } else {
            error_string = answer + questions[variant].error_message
        }
        if(error_string!=null) {
            flash(error_string);
        }
        $('input#answer_box').val('');
        event.preventDefault();
        return false;
    });

    function refresh_answer_counts() {
        var correct_answers = correctly_answered.length;
        var total_answers = questions[variant].names.length;
        $('#added_answers').text(correct_answers);
        $('#not_answered').text(total_answers - correct_answers);
    }

    function append_answer(answered_item) {
        $('#answer_boxes').show();
        $answer_el = $('<span />');
        var full_name = questions[variant].names[answered_item];
        correctly_answered.push(answered_item);
        $answer_el.addClass("answered_item").text(full_name);
        $('#entered_answers').append($answer_el);
    }

    function flash(error_string) {
        $('#error_display').flash_message({
            text: error_string,
            how: 'append'
        });
    }

    function welcome_user() {

      var string = '<div class="box-content align_left welcome_div">Welcome to Jana Trivia Challenge fundraiser for the the earthquake victims in Nepal. Please try the challenge  and if you fail, donate <span class="green_number">$15</span> to the fundraiser.</div>';
      $('#welcomemessage').html(string).delay(5000).fadeOut(500);
    }

    function stopChallenge() {
        $('#answer_box').prop('disabled', true);
        $('#submit_button').prop('disabled', true);
    }

    function timesUp() {
        stopChallenge();
        showAnswers();
        if(correctly_answered.length==questions[variant].names.length) {
            console.log('YAY');
        } else {
            console.log('BOO');
        }
    }

    function populateQuestion(variant) {
        $('#question_text').html(
          str_replace(['number'],
            [questions[variant].passing_score],
            questions[variant].description +  " or Donate $15 to the Earthquake victims"
          ));
    }

    function showAnswers() {
        for (index in questions[variant].names) {
            if($.inArray(parseInt(index), correctly_answered)==-1) {
                $answer_el = $('<span />');
                var full_name = questions[variant].names[index];

                $answer_el.addClass("missed_item").text(full_name);
                $('#missed_answers').show();
                $('#missed_answers').append($answer_el);
                $('#missed_numbers').show();
            }
        }

    }

    populateQuestion(variant);
}

function gogogo() {
  FB.ui({
    method: 'share',
    href: 'https://42b93ec2.ngrok.com/a',
  });
}

function start_timer() {
    var time_left = questions[variant].time;
    function timer() {
        time_left -= 1;
        $('#submit_button').prop('value', "Submit ("+ time_left + " seconds left)");
    }
    var counter=setInterval(timer, 1000);

}

function str_replace(replaceArray, replaceWith, myString) {
  for(var i = 0; i < replaceArray.length; i++) {
    myString = myString.replace(new RegExp('{' + replaceArray[i] + '}', 'gi'), replaceWith[i]);
  }
  return myString;
}

function populate_nomination_challenges() {

}

</script>
<div class="map-overlay">
<div class="main-content">
  <div class="title">
    Jana Trivia Challenge
  </div>
  <div class="box" id="welcomemessage">
  </div>
  <div class="box">
    <div class="box-content align_left translucentblack">
      <div class="topsection">
        <div class="question" id='question_text'></div>
        <div class="note-text lightblue">Enter one at a time and press "enter" or click "Submit"...</div>
      </div>
      <div class="answer-form">
        <form id="access_code_form">
            <label>
                <input type="text" class="input_form" id="answer_box" autocomplete="off"></input>
            </label>
            <input type="submit" class="button submit-button" id="submit_button"/>
        </form>
        <div class="green-text big-text"><span id="added_answers"></span> Correct!  <span class="small_text">(there are <span id="not_answered"></span> more ...)</span></div>
      </div>
      <div id='error_display'></div>
      <div class="answer_boxes" id="answer_boxes">
        <div class="answer_box" id="entered_answers"></div>
      </div>
    </div>
  </div>
  <div class="box">
    <div class="box-content align_center faded-white">
      <div class="topsection">
        <div class="black-text">When you are done, nominate <span class="orange-text">at least 5</span> Facebook friends for the Challenge:</div>
        <div class="note-text grey">Spread the word. Your Facebook share is worth more than <span class="orange-text">$60</span> to the campaign!</div>
      </div>
      <div>
        <label class="nomination">
          Challenge:
          <select class="nomination_input" id="challenge_selection">
          </select>
        </label>
        <input onclick="gogogo()" class="facebook-button button" value="Nominate"></input>
      </div>
      <div class="postscript-text">
        Or use this link: <span class="link-text link">http://bit.ly/1IsnzIq</span>
      </div>
    </div>
  </div>
  <div class="box">
    <div class="box-content align_left white">
      <div class="button">Donate Now</div>
      </br>
      Who are we: Jana is an internet startup in Boston whose mission is to make internet free for the next billion. We currently serve 25 million + users in different emerging markets. Click here to view a recent Forbes article about us.
      </br>
      How will the donation be used: The donations collected from this campaign will be handed over to Nepal's Prime Minister's Disaster Relief Fund.
      </br>
      Why did we choose PM relief Fund: The fund is managed by a democratically elected Nepali government in coordination with the technocrats in the National Planning Commission.
      </br>
    </div>
    <div class="box-content align_left white">
      7.8M Nepal Earthquake in numbers:
      <div class="stats-container">
        <div class="stat">
          <span class="stat_title">Death Toll:</span>
          <span class="stat_number">8,019</span>
        </div>
        <div class="stat">
          <span class="stat_title">Serious Injuries:</span>
          <span class="stat_number">17,866</span>
        </div>
        <div class="stat">
          <span class="stat_title">Houses Destroyed:</span>
          <span class="stat_number">299,588</span>
        </div>
        <div class="stat">
          <span class="stat_title">Houses Damaged:</span>
          <span class="stat_number">269,107</span>
        </div>
        <div class="stat">
          <span class="stat_title">Children Affected:</span>
          <span class="stat_number">1 million + </span>
        </div>
        <div class="stat">
          <span class="stat_title">Immediately Necessary Aid:</span>
          <span class="stat_number">$450 million +</span>
        </div>
        <div class="stat">
          <span class="stat_title">Aid received by the Government:</span>
          <span class="stat_number">$7 million</span>
        </div>
      </div> 
      <div>
        Youtube video.
      </div>
      <div>
        Facebook Pictures
      </div>
      <div>
        Related links
      </div>
    </div>

  </div>
</div>
</div>
</body>
</html>